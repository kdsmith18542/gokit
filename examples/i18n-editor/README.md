# GoKit i18n Editor Example

This example demonstrates the advanced web-based i18n editor provided by GoKit. The editor is designed to solve common workflow problems by allowing non-technical team members (translators, copywriters, product managers) to manage localization content directly without touching code.

## Features

### üéØ **Table-Based Translation Editing**
- View all translation keys in a single table interface
- Edit translations directly in the browser with real-time updates
- Support for multiple locales side-by-side

### üîç **Advanced Search & Filtering**
- Search across translation keys and text content
- Real-time filtering as you type
- Find missing translations quickly

### ‚ö†Ô∏è **Missing Translation Highlighting**
- Visual indicators for empty translation fields
- Easy identification of incomplete translations
- Color-coded highlighting for missing content

### üíæ **Real-Time Save Functionality**
- Save changes with a single click
- Automatic change tracking
- Unsaved changes warnings

### üé® **Modern, Responsive UI**
- Clean, professional interface
- Mobile-friendly design
- Intuitive user experience

## Quick Start

1. **Run the example:**
   ```bash
   cd examples/i18n-editor
   go run main.go
   ```

2. **Open your browser:**
   Navigate to `http://localhost:8080/i18n/editor/`

3. **Start editing:**
   - Use the search box to find specific translations
   - Click on any translation field to edit
   - Missing translations are highlighted in yellow
   - Click "Save Changes" to persist your edits

## Sample Data

The example includes comprehensive sample translation files for:
- **English (en)** - Complete translations
- **Spanish (es)** - Complete translations  
- **French (fr)** - Complete translations
- **German (de)** - Complete translations

Each locale file contains 25 common UI strings including:
- Welcome messages
- Form labels (login, register, email, password)
- Action buttons (save, delete, edit, cancel)
- Status messages (loading, error, success)
- Confirmation dialogs

## Integration in Your Application

To integrate the i18n editor into your own Go application:

```go
package main

import (
    "net/http"
    "github.com/kdsmith18542/gokit/i18n"
    "github.com/kdsmith18542/gokit/i18n/editor"
)

func main() {
    // Initialize your i18n manager
    manager := i18n.NewManager("./locales")
    
    // Create the editor handler
    editorHandler := editor.NewHandler(editor.EditorConfig{
        LocalesDir: "./locales",
        Manager:    manager,
    })
    
    // Mount the editor on a protected route
    http.Handle("/admin/translations/", http.StripPrefix("/admin/translations", editorHandler))
    
    // Start your server
    http.ListenAndServe(":8080", nil)
}
```

## Security Considerations

‚ö†Ô∏è **Important:** The i18n editor should only be enabled in development environments or with proper authentication and authorization controls in production.

### Recommended Security Practices:

1. **Route Protection:** Mount the editor on a protected route (e.g., `/admin/translations/`)
2. **Authentication:** Implement proper authentication middleware
3. **Authorization:** Ensure only authorized users can access the editor
4. **Environment Control:** Disable in production or use feature flags

### Example with Authentication:

```go
func authMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        // Implement your authentication logic here
        if !isAuthenticated(r) {
            http.Error(w, "Unauthorized", http.StatusUnauthorized)
            return
        }
        next.ServeHTTP(w, r)
    })
}

// Apply middleware to editor routes
http.Handle("/admin/translations/", authMiddleware(http.StripPrefix("/admin/translations", editorHandler)))
```

## API Endpoints

The editor provides the following REST API endpoints:

- `GET /` - Main editor UI
- `GET /api/locales` - List available locales
- `GET /api/translations` - Get all translation data
- `POST /api/save` - Save translation changes

## File Format Support

The editor currently supports:
- **TOML** (`.toml`) - Primary format with full support
- **JSON** (`.json`) - Basic support for reading

### TOML Format Example:

```toml
# English locale file
# Generated by GoKit i18n Editor

welcome = "Welcome to our application!"
hello = "Hello, {{.Name}}!"
item = "1 item"
items = "{{.Count}} items"
```

## Workflow Benefits

### For Developers:
- **Reduced Bottleneck:** No longer need to manually update translation files
- **Faster Iterations:** Content changes don't require code deployments
- **Better Collaboration:** Non-technical team members can contribute directly

### For Non-Technical Team Members:
- **No Code Required:** Edit translations through a user-friendly web interface
- **Immediate Feedback:** See changes reflected in real-time
- **Error Prevention:** UI ensures proper file format and structure

### For Teams:
- **Streamlined Process:** Eliminates back-and-forth between developers and translators
- **Quality Assurance:** Visual indicators help identify missing translations
- **Version Control:** Changes are saved directly to source files

## Troubleshooting

### Common Issues:

1. **"Failed to read locales dir"**
   - Ensure the locales directory exists and is readable
   - Check file permissions

2. **"Save failed"**
   - Verify write permissions on the locales directory
   - Check that TOML files are valid

3. **Missing translations not highlighted**
   - Ensure translation fields are completely empty (not just whitespace)
   - Check browser console for JavaScript errors

### Debug Mode:

To enable debug logging, set the `DEBUG` environment variable:

```bash
DEBUG=1 go run main.go
```

## Contributing

The i18n editor is part of the GoKit project. To contribute:

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests for new functionality
5. Submit a pull request

## License

This example is part of GoKit and follows the same license as the main project. 